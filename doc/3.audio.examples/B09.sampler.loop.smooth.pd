#N canvas 401 67 842 605 12;
#X declare -stdpath ./;
#N canvas 0 0 450 300 (subpatch) 0;
#X array cos-output 44100 float 0;
#X coords 0 1.02 44099 -1.02 200 130 1;
#X restore 510 201 graph;
#N canvas 0 0 450 300 (subpatch) 0;
#X array table18 44103 float 2;
#X coords 0 1.02 44103 -1.02 200 130 1;
#X restore 507 26 graph;
#X obj 509 473 loadbang;
#X obj 82 269 hip~ 5;
#X floatatom 82 70 6 0 0 0 - - - 0;
#X floatatom 165 107 6 0 0 0 - - - 0;
#X obj 165 134 * 441;
#X obj 147 183 +~ 1;
#X obj 512 373 adc~ 1;
#X obj 82 159 -~ 0.5;
#X obj 82 209 cos~;
#X obj 82 242 *~;
#X obj 509 527 soundfiler;
#X text 522 158 -- 44103 samples ---;
#X text 539 334 ----- 1 second ------;
#X obj 82 97 phasor~;
#X obj 82 184 *~ 0.5;
#X obj 82 303 output~;
#X obj 147 158 *~;
#X obj 204 267 tabwrite~ cos-output;
#X text 26 549 It is possible to get much more control over the shape of the envelope \, but this will be taken up later., f 61;
#X obj 147 209 tabread4~ table18;
#X obj 512 429 tabwrite~ table18;
#X msg 509 502 read ../sound/voice.wav table18;
#X text 550 403 <-- click here to record to table;
#X text 600 481 v-- re-read the original sound;
#X obj 221 333 declare -stdpath ./;
#X text 225 240 <-- click to graph envelope;
#X text 131 69 <-- frequency (Hz.);
#X text 213 106 <-- chunk size (100ths of a second);
#X obj 204 240 bng 19 250 50 0 empty empty empty 17 7 0 10 #dfdfdf #000000 #000000;
#X obj 527 402 bng 19 250 50 0 empty empty empty 17 7 0 10 #dfdfdf #000000 #000000;
#X text 26 380 Here we apply an amplitude envelope to protect against discontinuities at the loop point. The envelope is just a cosine wave from -90 degrees to +90 degrees \, (-pi/2 to pi/2 radians) \, i.e. \, the part that is zero or positive in sign. The [cos~] object's input is in cycles (units of 2pi radians) so -1/4 to +1/4 addresses the desired part of the waveform., f 61;
#X text 26 480 To see the envelope \, put the [phasor~] on 2 Hz or so \, click the "graph" button \, and look at "cos-output." This is multiplied by the [tabread4~] output so that it doesn't click when the phase wraps around., f 61;
#X obj 53 14 cnv 5 5 25 empty empty Enveloping\ your\ Looping\ Sampler 15 13 0 16 #dfdfdf #202020 0;
#X connect 2 0 23 0;
#X connect 3 0 17 0;
#X connect 4 0 15 0;
#X connect 5 0 6 0;
#X connect 6 0 18 1;
#X connect 7 0 21 0;
#X connect 8 0 22 0;
#X connect 9 0 16 0;
#X connect 10 0 11 0;
#X connect 10 0 19 0;
#X connect 11 0 3 0;
#X connect 15 0 9 0;
#X connect 15 0 18 0;
#X connect 16 0 10 0;
#X connect 18 0 7 0;
#X connect 21 0 11 1;
#X connect 23 0 12 0;
#X connect 30 0 19 0;
#X connect 31 0 22 0;
