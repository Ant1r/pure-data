#N canvas 532 66 639 719 12;
#X declare -stdpath ./;
#X obj 153 376 line~;
#X obj 59 489 cos~;
#X obj 153 352 pack 0 50;
#X floatatom 153 280 4 0 0 0 - - - 0;
#X obj 59 381 -~ 0.5;
#X obj 59 440 *~;
#X obj 153 304 / 10;
#X obj 59 465 clip~ -0.5 0.5;
#X text 189 281 bandwidth;
#X obj 153 400 +~ 1;
#X obj 60 512 +~ 1;
#X obj 218 485 cos~;
#X obj 60 551 *~;
#X floatatom 236 324 5 0 0 0 - - - 0;
#X obj 236 348 / 10;
#X obj 218 459 *~;
#X obj 153 328 max 0;
#X obj 236 420 line~;
#X obj 236 396 pack 0 50;
#X obj 236 372 max 0;
#X floatatom 59 333 5 0 0 0 - - - 0;
#X obj 59 357 phasor~ 100;
#N canvas 0 22 450 278 (subpatch) 0;
#X array spectrum 128 float 0;
#X coords 0 500 128 0 256 130 1;
#X restore 324 458 graph;
#N canvas 590 187 344 253 fft 0;
#X obj 46 48 inlet~;
#X obj 137 179 tabwrite~ spectrum;
#X obj 137 46 inlet;
#X obj 46 78 rfft~;
#X obj 46 111 *~;
#X obj 78 111 *~;
#X obj 78 142 sqrt~;
#X obj 163 114 block~ 1024;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 3 0 4 1;
#X connect 3 1 5 0;
#X connect 3 1 5 1;
#X connect 4 0 6 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X restore 84 589 pd fft;
#X text 323 594 0;
#X text 571 594 5512;
#X text 57 69 Here's the spectrum you get. Note that even if you put the center frequency right on a partial \, there is significant energy in neighboring partials (try fundamental 440 \, "center freq" 30 \, bandwidth 0.), f 63;
#X text 56 136 The center frequency is in units of ten per partial \, or in other words a value of "30" means "centered on the third partial"., f 63;
#X text 55 192 This technique only works if you're doing Hanning-window shaped PWM--you can't combine this naturally with FM or with the waveshaping technique we'll see later., f 63;
#X obj 60 630 output~;
#X obj 420 381 declare -stdpath ./;
#X obj 123 562 bng 19 250 50 0 empty empty empty 0 -6 0 8 #dfdfdf #000000 #000000;
#X text 145 560 <-- graph;
#X text 279 323 center freq.;
#X text 35 296 fundamental frequency, f 11;
#X obj 78 24 cnv 5 5 25 empty empty Windowed\ Packet\ Spectrum 15 13 0 16 #dfdfdf #202020 0;
#X connect 0 0 9 0;
#X connect 1 0 10 0;
#X connect 2 0 0 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 4 0 15 0;
#X connect 5 0 7 0;
#X connect 6 0 16 0;
#X connect 7 0 1 0;
#X connect 9 0 5 1;
#X connect 10 0 12 0;
#X connect 11 0 12 1;
#X connect 12 0 23 0;
#X connect 12 0 29 0;
#X connect 13 0 14 0;
#X connect 14 0 19 0;
#X connect 15 0 11 0;
#X connect 16 0 2 0;
#X connect 17 0 15 1;
#X connect 18 0 17 0;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 21 0 4 0;
#X connect 31 0 23 1;
