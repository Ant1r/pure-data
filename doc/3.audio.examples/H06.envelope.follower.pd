#N canvas 569 38 549 725 12;
#X floatatom 68 577 8 0 0 0 - - - 0;
#X floatatom 322 300 5 0 999 0 - \$0-osc2 - 12;
#X obj 322 334 osc~;
#X text 39 14 ENVELOPE FOLLOWER;
#X obj 248 511 lop~;
#X floatatom 273 482 4 0 100 0 - \$0-lop - 0;
#X obj 247 386 +~;
#X obj 247 355 osc~ 500;
#X obj 248 448 *~;
#X obj 248 574 snapshot~;
#X floatatom 248 635 9 0 999 0 - - - 0;
#X obj 248 604 sqrt;
#X obj 68 604 dbtorms;
#X text 301 449 square the signal;
#X text 285 603 convert to RMS;
#X text 311 684 updated for Pd version 0.39;
#X text 293 511 low-pass filter;
#X text 317 634 output;
#X obj 259 546 r \$0-tick;
#X obj 68 441 r \$0-tick;
#X obj 68 552 f;
#X obj 86 510 env~;
#X obj 322 388 *~;
#X obj 340 363 tgl 19 0 empty empty empty 0 -6 0 8 #dfdfdf #000000 #000000 0 1;
#X text 32 122 Here we're adding two oscillators so the result should be an RMS of one if the second oscillator is on \, 0.707 otherwise. Note two effects: first \, the more responsive the envelope follower \, the less accurate the result (but the faster it responds). Second \, if the two oscillators are tuned close to each other their beating affects the numbers coming out., f 70;
#X obj 68 342 ../5.reference/set-dsp-tgl;
#X text 99 345 DSP on/off;
#X msg 68 379 \; pd dsp \$1;
#X text 32 41 An envelope follower measures the mean square power of an signal as it changes over time. (You can convert mean square power to RMS amplitude or to decibels if you wish.) The term "mean square" means simply that the signal should be squared \, and then averaged. The averaging is done using a low-pass filter such as [lop~]., f 70;
#X text 33 216 The [env~] object at right \, which is a built-in envelope follower using a higher-quality low-pass filter than [lop~] \, is shown for comparison. Its output is artificially slowed down to match the homemade one at left., f 70;
#X text 308 482 <-- responsiveness;
#N canvas 536 459 382 265 init 0;
#X obj 85 14 loadbang;
#X obj 85 38 bng 19 250 50 0 empty empty empty 0 -6 0 8 #dfdfdf #000000 #000000;
#X obj 85 67 f \$0;
#X obj 229 91 metro 250;
#X obj 229 66 r \$0-metro;
#X obj 229 115 s \$0-tick;
#X msg 85 91 \; \$1-osc2 400 \; \$1-lop 10 \; \$1-metro 1;
#X text 86 181 This subpatch initializes the patch \, starts the metronome and loads initial values in number boxes., f 31;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X restore 444 611 pd init;
#X text 78 300 frequency of second oscillator -->;
#X text 365 363 <-- on/off;
#X floatatom 68 635 9 0 999 0 - - - 0;
#X text 331 542 take snapshot every 1/4 second, f 16;
#X text 122 509 <-- built-in envelope follower for comparison, f 12;
#X connect 0 0 12 0;
#X connect 1 0 2 0;
#X connect 2 0 22 0;
#X connect 4 0 9 0;
#X connect 5 0 4 1;
#X connect 6 0 8 0;
#X connect 6 0 8 1;
#X connect 6 0 21 0;
#X connect 7 0 6 0;
#X connect 8 0 4 0;
#X connect 9 0 11 0;
#X connect 11 0 10 0;
#X connect 12 0 34 0;
#X connect 18 0 9 0;
#X connect 19 0 20 0;
#X connect 20 0 0 0;
#X connect 21 0 20 1;
#X connect 22 0 6 1;
#X connect 23 0 22 1;
#X connect 25 0 27 0;
