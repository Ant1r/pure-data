#N canvas 338 38 914 661 12;
#X declare -stdpath ./;
#N canvas 0 0 450 300 (subpatch) 0;
#X array tab28 176403 float 2;
#X coords 0 1.02 176403 -1.02 200 130 1;
#X restore 599 287 graph;
#X obj 547 470 loadbang;
#X obj 412 221 hip~ 5;
#X obj 583 98 adc~ 1;
#X obj 583 128 hip~ 5;
#X text 647 476 v-- re-read the original sample;
#X obj 412 187 *~;
#X obj 452 160 r cutoff;
#X obj 412 70 r phase;
#X obj 149 143 delay 5;
#X msg 49 179 \; cutoff 0 5;
#X obj 662 178 line~;
#X obj 583 173 *~;
#X text 618 428 ------ 4 seconds ------;
#X obj 722 98 del 3990;
#X msg 722 126 0 10;
#X text 58 568 We avoid clicking at the end of the table by getting the table's own contents to go smoothly to zero. To do this we added a level control to the recording patch that cuts off just before the recording reaches the end of the table., f 59;
#X obj 547 529 soundfiler;
#X obj 452 187 vline~;
#X obj 412 261 output~;
#X obj 412 100 vline~;
#X obj 651 218 tabwrite~ tab28;
#X msg 547 500 read ../sound/bell.aiff tab28;
#X obj 412 130 tabread4~ tab28;
#X msg 149 178 \; phase 1 \, 4.41e+08 1e+07 \; cutoff 1;
#X msg 662 116 0 \, 1 5;
#X text 651 532 My apologies to Jonathan Harvey whose bell this is., f 26;
#X text 132 236 set the upper line~ to start at the first sample and go forever (until the next trigger), f 31;
#X text 54 140 cut the sound off, f 9;
#X text 208 135 Wait for the cutoff to finish, f 16;
#X obj 741 14 declare -stdpath ./;
#X text 73 87 <-- play the sample;
#X text 675 57 <-- record;
#X obj 49 88 bng 19 250 50 0 empty empty empty 0 -6 0 8 #dfdfdf #000000 #000000;
#X obj 651 58 bng 19 250 50 0 empty empty empty 0 -6 0 8 #dfdfdf #000000 #000000;
#X text 761 126 <-- stop recording, f 9;
#X text 58 352 Here's how to make a sampler with a [line~] object \, instead of a [phasor~] \, to generate the read location signal.;
#X text 58 393 To start a note \, first we have to mute the output in case there's already something playing---otherwise we'll get a click. The "cutoff" [line~] then takes 5 msec to get to zero. After that amount of delay \, we reset the phase to sample number 1 and set it in motion. We want the [line~] output to increase by 1 each sample of output \, so we ask for it to do 4.41e+08 samples in 1e+07 milliseconds., f 59;
#X text 58 501 The cutoff mechanism is still safe if we happen to ask for two notes in under 5 msec. The second request would reset the delay \, so that there's no way the delay can possibly fire without the cutoff [line~] at zero., f 59;
#X obj 42 13 cnv 5 5 25 empty empty One-Shot\ Sampler\ using\ [line~]\ as\ Phase 15 13 0 16 #dfdfdf #202020 0;
#X connect 1 0 22 0;
#X connect 2 0 19 0;
#X connect 3 0 4 0;
#X connect 4 0 12 0;
#X connect 6 0 2 0;
#X connect 7 0 18 0;
#X connect 8 0 20 0;
#X connect 9 0 24 0;
#X connect 11 0 12 1;
#X connect 12 0 21 0;
#X connect 14 0 15 0;
#X connect 15 0 11 0;
#X connect 18 0 6 1;
#X connect 20 0 23 0;
#X connect 22 0 17 0;
#X connect 23 0 6 0;
#X connect 25 0 11 0;
#X connect 33 0 10 0;
#X connect 33 0 9 0;
#X connect 34 0 14 0;
#X connect 34 0 25 0;
#X connect 34 0 21 0;
